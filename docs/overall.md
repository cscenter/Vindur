#Документация Vindur
##Введение
Vindur - это встраиваемая NoSQL база данных.

Особенности:

- Позволяет выполнять быстрый поиск по нескольким критериям
- Все операции в оперативной памяти
- Легко установить и настроить
- Полностью написана на Java

##Зачем это нужно?
Представьте себе обыкновенный магазин с миллионом товаров. Каждый товар обладает множеством различных характеристик.
Зачастую поиск подходящих товаров производится по нескольким характеристикам, а сами товары могут находиться в разных
категориях. Все это требует от поискового движка возможность осуществлять быстрый многокритериальный поиск.

##Архитектура
Vindur базируется на колоночной архитектуре - данные в ней представляют собой совокупность колонок. Это значительно
ускоряет выборку по нескольким атрибутам, в отличие от БД с построчной архитектурой. Данные в Vindur представлены как
набор документом с уникальным идентификатором. Документ представляет собой совокупность значений аттрибутов.

Vindur имеет несколько типов хранилищ, оптимизированных для различных поисковых запросов:


**TODO** не совсем верно, это типы для тестирования, вообще хранилища чуть-чуть другие
- **INTEGER** - точный запрос числового значения
- **RANGE_INTEGER** - числовое значение в диапазоне
- **STRING** - точное строковое значение
- **RANGE_STRING** - поиск строки в диапазоне
- **LUCENE_STRING** - хранилище для выполнения Lucene запросов

Результатом выполнения поискового запроса к хранилищу является BitSet, с помощью которого формируется список
идентификаторов подходящих документов.  
Запросы обрабатываются и оптимизируются в процессе выполнения *исполнителем запросов*.

##История
**TODO** пока не знаю, что
Студенческий проект в CSC, год, участники и прочее про вас


##Обзор
###Установка
Репозиторий проекта на [GitHub]
##Маленькая задача
сформулировать маленькую простеньку задачу - например, искать книжки в библиотеке Конгресса.
Или запчасти к автомобилям.

###Настройка
TODO: инициация хранилища на основе "маленькой задачи"


Для начала нужно подготовить хранилища. Хранилище состоит из имени аттрибута и типа значения, ассоциируемого с этим именем. Пример простого хранилища:

    Map<String, StorageType> storages = new HashMap<>();
    storages.put("Price", StorageType.RANGE_INTEGER);
    storages.put("Manufacturer", StorageType.STRING);
    storages.put("Model", StorageType.STRING);

Теперь можно создать движок и настроить его для работы с нашим хранилищем:

    Engine engine = new Engine.EngineBuilder(EWAHBitSet::new)
            .setStorages(storages)
            .createEngine();
###Заполнение
Перед тем как добавить объект в базу данных, нужно создать новый документ:  

    int docId = engine.createDocument();
    
Теперь, обращаясь к документу по id, можно установить его атрибуты, например:

    engine.setAttributeByDocId(docId, "Price", "399");
    engine.setAttributeByDocId(docId, "Manufacturer", "Nokia");
    engine.setAttributeByDocId(docId, "Model", "3310");

###Запросы
**TODO** написать про точный запрос, запрос по диапазону, Lucene запрос.
  
  
Vindur поддерживает три типа запросов: точный запрос, запрос в диапазоне и Lucene-запрос.  

уже не так. Каждое хранилище поддерживает свой тип запроса.
посмотри на код


**Точный запрос**  
Пример для получения списка всех товаров, производителем которых является Nokia:

    Query query = Query.build()
        .query("Manufacturer", "Nokia");
    List<Integer> allNokiaId = engine.executeQuery(query);


Query.build().query"жанр","Фэнтези").query("цена",RangeStorage.range(10,100)).query("аннотация",LuceneQuery("круто"))


**Запрос в диапазоне** и **Lucene-запрос**: а мы умеем это делать через engine, или пока только через хранилища?
  
##Описание экзекуторов
 TODO
 Dumb - только для тестирования
 Tiny - по умолчанию
 Smart - если используется Lucene  или дорогие хранилища
  
  
  
##Описание стандартных хранилищ
Нужно ли это сделать отдельно здесь или оставить только в архитектуре?

#Примечания к коду

[GitHub]:https://github.com/cscenter/Vindur/